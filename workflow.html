<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI DevOps Autopilot - Complete Workflow</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        .fade-in { animation: fadeIn 0.5s ease-out; }
        @keyframes flow { 0% { stroke-dashoffset: 1000; } 100% { stroke-dashoffset: 0; } }
        .flow-line { animation: flow 2s linear infinite; stroke-dasharray: 10; }
    </style>
</head>
<body class="bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 text-gray-100 p-8">
    <div class="max-w-7xl mx-auto">
        <!-- Header -->
        <div class="text-center mb-12 fade-in">
            <h1 class="text-5xl font-bold mb-4 bg-gradient-to-r from-blue-400 to-purple-500 bg-clip-text text-transparent">
                AI DevOps Autopilot
            </h1>
            <p class="text-2xl text-gray-400">Complete Workflow Explanation</p>
            <p class="text-sm text-gray-500 mt-2">From Detection to Autonomous Resolution</p>
        </div>

        <!-- Phase Overview -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-12">
            <div class="bg-blue-900/20 border-2 border-blue-600 rounded-xl p-6 fade-in">
                <div class="text-4xl mb-3">üîç</div>
                <h3 class="text-xl font-bold mb-2">Phase 1: Detection</h3>
                <p class="text-sm text-gray-400">Monitors metrics, logs, and deployments. Detects anomalies and correlates them into incidents.</p>
                <div class="mt-4 text-xs text-blue-400">‚Üí Human-free detection</div>
            </div>
            
            <div class="bg-purple-900/20 border-2 border-purple-600 rounded-xl p-6 fade-in" style="animation-delay: 0.1s">
                <div class="text-4xl mb-3">üëÅÔ∏è</div>
                <h3 class="text-xl font-bold mb-2">Phase 2: Supervised</h3>
                <p class="text-sm text-gray-400">AI proposes remediation actions. Human approves. System learns from outcomes.</p>
                <div class="mt-4 text-xs text-purple-400">‚Üí Human-in-the-loop</div>
            </div>
            
            <div class="bg-green-900/20 border-2 border-green-600 rounded-xl p-6 fade-in" style="animation-delay: 0.2s">
                <div class="text-4xl mb-3">ü§ñ</div>
                <h3 class="text-xl font-bold mb-2">Phase 3: Autonomous</h3>
                <p class="text-sm text-gray-400">High-confidence actions execute automatically with safety rails and rollback capabilities.</p>
                <div class="mt-4 text-xs text-green-400">‚Üí Fully autonomous</div>
            </div>
        </div>

        <!-- Detailed Workflow -->
        <div class="space-y-8">
            <!-- Step 1: Data Ingestion -->
            <div class="bg-slate-800 rounded-xl p-8 border border-slate-700 fade-in">
                <div class="flex items-center gap-4 mb-6">
                    <div class="bg-blue-600 rounded-full w-12 h-12 flex items-center justify-center text-xl font-bold">1</div>
                    <div>
                        <h2 class="text-2xl font-bold">Data Ingestion</h2>
                        <p class="text-gray-400">System collects telemetry from your infrastructure</p>
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                    <div class="bg-slate-700/50 rounded-lg p-4">
                        <div class="text-2xl mb-2">üìä</div>
                        <h4 class="font-bold mb-2">Metrics</h4>
                        <ul class="text-sm text-gray-400 space-y-1">
                            <li>‚Ä¢ API latency (ms)</li>
                            <li>‚Ä¢ Error rates (%)</li>
                            <li>‚Ä¢ CPU/Memory usage</li>
                            <li>‚Ä¢ Request throughput</li>
                            <li>‚Ä¢ Database query times</li>
                        </ul>
                    </div>
                    
                    <div class="bg-slate-700/50 rounded-lg p-4">
                        <div class="text-2xl mb-2">üìù</div>
                        <h4 class="font-bold mb-2">Logs</h4>
                        <ul class="text-sm text-gray-400 space-y-1">
                            <li>‚Ä¢ Application logs</li>
                            <li>‚Ä¢ Error messages</li>
                            <li>‚Ä¢ Stack traces</li>
                            <li>‚Ä¢ Warning patterns</li>
                            <li>‚Ä¢ User actions</li>
                        </ul>
                    </div>
                    
                    <div class="bg-slate-700/50 rounded-lg p-4">
                        <div class="text-2xl mb-2">üöÄ</div>
                        <h4 class="font-bold mb-2">Events</h4>
                        <ul class="text-sm text-gray-400 space-y-1">
                            <li>‚Ä¢ Deployments</li>
                            <li>‚Ä¢ Config changes</li>
                            <li>‚Ä¢ Scale events</li>
                            <li>‚Ä¢ Infrastructure updates</li>
                            <li>‚Ä¢ Feature flags</li>
                        </ul>
                    </div>
                </div>

                <div class="bg-blue-900/20 border border-blue-700/50 rounded-lg p-4">
                    <div class="font-semibold mb-2">üì° API Endpoints:</div>
                    <code class="text-sm text-blue-400">
                        POST /ingest/metrics ‚Üí POST /ingest/logs ‚Üí POST /ingest/deployment
                    </code>
                    <div class="text-xs text-gray-500 mt-2">Data stored in Redis streams for processing</div>
                </div>
            </div>

            <!-- Step 2: Anomaly Detection -->
            <div class="bg-slate-800 rounded-xl p-8 border border-slate-700 fade-in">
                <div class="flex items-center gap-4 mb-6">
                    <div class="bg-orange-600 rounded-full w-12 h-12 flex items-center justify-center text-xl font-bold">2</div>
                    <div>
                        <h2 class="text-2xl font-bold">Anomaly Detection (Phase 1)</h2>
                        <p class="text-gray-400">Statistical analysis identifies deviations from baseline</p>
                    </div>
                </div>

                <div class="space-y-4">
                    <div class="flex items-start gap-4">
                        <div class="bg-orange-500 rounded-lg px-3 py-1 text-sm font-bold mt-1">STEP 1</div>
                        <div class="flex-1">
                            <h4 class="font-bold mb-2">Baseline Calculation</h4>
                            <p class="text-sm text-gray-400 mb-2">System learns normal behavior for each metric:</p>
                            <div class="bg-slate-700/50 rounded p-3 text-sm font-mono">
                                <div>mean = average(last_100_values)</div>
                                <div>std_dev = standard_deviation(last_100_values)</div>
                                <div class="text-gray-500">// Stored in Redis: baseline:{"{service}"}:{"{metric}"}</div>
                            </div>
                        </div>
                    </div>

                    <div class="flex items-start gap-4">
                        <div class="bg-orange-500 rounded-lg px-3 py-1 text-sm font-bold mt-1">STEP 2</div>
                        <div class="flex-1">
                            <h4 class="font-bold mb-2">Z-Score Analysis</h4>
                            <p class="text-sm text-gray-400 mb-2">Calculates how far current value deviates:</p>
                            <div class="bg-slate-700/50 rounded p-3 text-sm font-mono">
                                <div>z_score = (current_value - mean) / std_dev</div>
                                <div class="text-yellow-400 mt-2">if z_score > 3.0 ‚Üí üî¥ CRITICAL anomaly</div>
                                <div class="text-orange-400">if z_score > 2.0 ‚Üí üü† HIGH anomaly</div>
                                <div class="text-blue-400">if z_score > 1.5 ‚Üí üîµ MEDIUM anomaly</div>
                            </div>
                        </div>
                    </div>

                    <div class="flex items-start gap-4">
                        <div class="bg-orange-500 rounded-lg px-3 py-1 text-sm font-bold mt-1">STEP 3</div>
                        <div class="flex-1">
                            <h4 class="font-bold mb-2">Anomaly Storage</h4>
                            <p class="text-sm text-gray-400">Stores for correlation:</p>
                            <div class="bg-slate-700/50 rounded p-3 text-sm">
                                <div class="text-green-400">‚úì Stored in: recent_anomalies:{"{service}"}</div>
                                <div class="text-gray-500 mt-1">Contains: metric, value, baseline, z-score, severity, timestamp</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="bg-orange-900/20 border border-orange-700/50 rounded-lg p-4 mt-6">
                    <div class="font-semibold mb-2">üéØ Example:</div>
                    <div class="text-sm text-gray-300">
                        <div class="mb-2"><strong>Normal:</strong> API latency = 50ms (baseline: 45ms ¬± 5ms)</div>
                        <div class="mb-2"><strong>Anomaly Detected:</strong> API latency = 150ms</div>
                        <div class="text-red-400"><strong>Calculation:</strong> z_score = (150 - 45) / 5 = 21.0 ‚Üí üî¥ CRITICAL</div>
                    </div>
                </div>
            </div>

            <!-- Step 3: Incident Correlation -->
            <div class="bg-slate-800 rounded-xl p-8 border border-slate-700 fade-in">
                <div class="flex items-center gap-4 mb-6">
                    <div class="bg-red-600 rounded-full w-12 h-12 flex items-center justify-center text-xl font-bold">3</div>
                    <div>
                        <h2 class="text-2xl font-bold">Incident Correlation</h2>
                        <p class="text-gray-400">Groups related anomalies into incidents</p>
                    </div>
                </div>

                <div class="space-y-4">
                    <div class="bg-slate-700/50 rounded-lg p-4">
                        <h4 class="font-bold mb-3">Correlation Rules:</h4>
                        <div class="space-y-2 text-sm">
                            <div class="flex items-center gap-3">
                                <span class="bg-red-500 px-2 py-1 rounded font-mono text-xs">RULE 1</span>
                                <span class="text-gray-300">‚â• 1 CRITICAL anomaly in 5 minutes ‚Üí Create incident</span>
                            </div>
                            <div class="flex items-center gap-3">
                                <span class="bg-orange-500 px-2 py-1 rounded font-mono text-xs">RULE 2</span>
                                <span class="text-gray-300">‚â• 3 anomalies (any severity) in 5 minutes ‚Üí Create incident</span>
                            </div>
                            <div class="flex items-center gap-3">
                                <span class="bg-yellow-500 px-2 py-1 rounded font-mono text-xs">RULE 3</span>
                                <span class="text-gray-300">Multiple services affected ‚Üí Escalate severity</span>
                            </div>
                        </div>
                    </div>

                    <div class="bg-slate-700/50 rounded-lg p-4">
                        <h4 class="font-bold mb-3">Incident Cooldown:</h4>
                        <p class="text-sm text-gray-400">Prevents alert spam - 5 minute cooldown between incidents for same service</p>
                    </div>
                </div>
            </div>

            <!-- Step 4: AI Analysis -->
            <div class="bg-slate-800 rounded-xl p-8 border border-slate-700 fade-in">
                <div class="flex items-center gap-4 mb-6">
                    <div class="bg-purple-600 rounded-full w-12 h-12 flex items-center justify-center text-xl font-bold">4</div>
                    <div>
                        <h2 class="text-2xl font-bold">AI Root Cause Analysis</h2>
                        <p class="text-gray-400">LLM analyzes context and determines root cause</p>
                    </div>
                </div>

                <div class="space-y-4">
                    <div class="bg-slate-700/50 rounded-lg p-4">
                        <h4 class="font-bold mb-3">AI Input Context:</h4>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                            <div class="bg-slate-800 rounded p-3 text-sm">
                                <div class="font-semibold text-blue-400 mb-2">üìä Anomalies</div>
                                <div class="text-gray-400">‚Ä¢ Which metrics spiked</div>
                                <div class="text-gray-400">‚Ä¢ Severity levels</div>
                                <div class="text-gray-400">‚Ä¢ Timing correlation</div>
                            </div>
                            <div class="bg-slate-800 rounded p-3 text-sm">
                                <div class="font-semibold text-red-400 mb-2">üìù Error Logs</div>
                                <div class="text-gray-400">‚Ä¢ Last 10 minutes</div>
                                <div class="text-gray-400">‚Ä¢ Stack traces</div>
                                <div class="text-gray-400">‚Ä¢ Error patterns</div>
                            </div>
                            <div class="bg-slate-800 rounded p-3 text-sm">
                                <div class="font-semibold text-green-400 mb-2">üöÄ Deployments</div>
                                <div class="text-gray-400">‚Ä¢ Last 30 minutes</div>
                                <div class="text-gray-400">‚Ä¢ Version changes</div>
                                <div class="text-gray-400">‚Ä¢ Timing correlation</div>
                            </div>
                            <div class="bg-slate-800 rounded p-3 text-sm">
                                <div class="font-semibold text-yellow-400 mb-2">üìö History</div>
                                <div class="text-gray-400">‚Ä¢ Similar past incidents</div>
                                <div class="text-gray-400">‚Ä¢ What worked before</div>
                                <div class="text-gray-400">‚Ä¢ Common patterns</div>
                            </div>
                        </div>
                    </div>

                    <div class="bg-purple-900/20 border border-purple-700/50 rounded-lg p-4">
                        <h4 class="font-bold mb-2">ü§ñ AI Model (Ollama/LLama3):</h4>
                        <div class="bg-slate-900 rounded p-4 text-sm font-mono text-gray-300 mb-3">
                            <div class="text-purple-400">// AI analyzes and returns:</div>
                            <div>{"{</div>
                            <div>  "root_cause": {"{"}</div>
                            <div>    "description": "Recent deployment v2.5.1 introduced memory leak",</div>
                            <div>    "confidence": 85,</div>
                            <div>    "reasoning": "Latency spike occurred 2 mins after deploy..."</div>
                            <div>  {"}"},</div>
                            <div>  "severity": "critical",</div>
                            <div>  "estimated_customer_impact": "High - 30% of users affected",</div>
                            <div>  "recommended_actions": [...]</div>
                            <div>{"}"}</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Step 5: Action Proposal -->
            <div class="bg-slate-800 rounded-xl p-8 border border-slate-700 fade-in">
                <div class="flex items-center gap-4 mb-6">
                    <div class="bg-yellow-600 rounded-full w-12 h-12 flex items-center justify-center text-xl font-bold">5</div>
                    <div>
                        <h2 class="text-2xl font-bold">Action Proposal (Phase 2)</h2>
                        <p class="text-gray-400">System proposes specific remediation actions</p>
                    </div>
                </div>

                <div class="space-y-4">
                    <div class="bg-slate-700/50 rounded-lg p-4">
                        <h4 class="font-bold mb-3">Action Types:</h4>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                            <div class="bg-green-900/20 border border-green-700/50 rounded p-3">
                                <div class="font-bold text-green-400 mb-2">üîÑ Rollback (LOW RISK)</div>
                                <div class="text-sm text-gray-400">Revert to previous stable version</div>
                                <div class="text-xs text-gray-500 mt-2">When: Recent deployment correlates with issues</div>
                            </div>
                            <div class="bg-orange-900/20 border border-orange-700/50 rounded p-3">
                                <div class="font-bold text-orange-400 mb-2">‚¨ÜÔ∏è Scale Up (MEDIUM RISK)</div>
                                <div class="text-sm text-gray-400">Increase replicas to handle load</div>
                                <div class="text-xs text-gray-500 mt-2">When: High latency or CPU usage</div>
                            </div>
                            <div class="bg-orange-900/20 border border-orange-700/50 rounded p-3">
                                <div class="font-bold text-orange-400 mb-2">üîÑ Restart Service (MEDIUM RISK)</div>
                                <div class="text-sm text-gray-400">Clear memory leaks or stuck processes</div>
                                <div class="text-xs text-gray-500 mt-2">When: Memory issues or deadlocks</div>
                            </div>
                            <div class="bg-red-900/20 border border-red-700/50 rounded p-3">
                                <div class="font-bold text-red-400 mb-2">üîß Config Change (HIGH RISK)</div>
                                <div class="text-sm text-gray-400">Adjust rate limits or timeouts</div>
                                <div class="text-xs text-gray-500 mt-2">When: Configuration issue detected</div>
                            </div>
                        </div>
                    </div>

                    <div class="bg-yellow-900/20 border border-yellow-700/50 rounded-lg p-4">
                        <h4 class="font-bold mb-2">Action Proposal Format:</h4>
                        <div class="bg-slate-900 rounded p-3 text-sm font-mono text-gray-300">
                            <div>{"{</div>
                            <div>  "action_type": "rollback",</div>
                            <div>  "service": "api-service",</div>
                            <div>  "params": {"{"} "target_version": "v2.4.8" {"}"},</div>
                            <div>  "reasoning": "Deploy v2.5.1 introduced memory leak",</div>
                            <div>  "risk": "low",</div>
                            <div>  "status": "pending"</div>
                            <div>{"}"}</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Step 6: Human Approval -->
            <div class="bg-slate-800 rounded-xl p-8 border border-slate-700 fade-in">
                <div class="flex items-center gap-4 mb-6">
                    <div class="bg-blue-600 rounded-full w-12 h-12 flex items-center justify-center text-xl font-bold">6</div>
                    <div>
                        <h2 class="text-2xl font-bold">Human Approval (Phase 2)</h2>
                        <p class="text-gray-400">You decide whether to execute the action</p>
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div class="bg-green-900/20 border-2 border-green-600 rounded-lg p-6">
                        <div class="text-3xl mb-3">‚úÖ</div>
                        <h4 class="font-bold text-lg mb-2">Approve Action</h4>
                        <p class="text-sm text-gray-400 mb-4">Click "Approve" in dashboard</p>
                        <div class="bg-slate-800 rounded p-3 text-sm">
                            <div class="text-green-400 mb-2">What happens:</div>
                            <div class="text-gray-400">1. Action moved to approved queue</div>
                            <div class="text-gray-400">2. Worker picks it up</div>
                            <div class="text-gray-400">3. Executes action</div>
                            <div class="text-gray-400">4. Records outcome</div>
                            <div class="text-gray-400">5. System learns</div>
                        </div>
                    </div>

                    <div class="bg-red-900/20 border-2 border-red-600 rounded-lg p-6">
                        <div class="text-3xl mb-3">‚ùå</div>
                        <h4 class="font-bold text-lg mb-2">Reject Action</h4>
                        <p class="text-sm text-gray-400 mb-4">Click "Reject" if action is inappropriate</p>
                        <div class="bg-slate-800 rounded p-3 text-sm">
                            <div class="text-red-400 mb-2">What happens:</div>
                            <div class="text-gray-400">1. Action marked as rejected</div>
                            <div class="text-gray-400">2. System learns this pattern</div>
                            <div class="text-gray-400">3. Won't propose similar next time</div>
                            <div class="text-gray-400">4. Manual intervention needed</div>
                        </div>
                    </div>
                </div>

                <div class="bg-blue-900/20 border border-blue-700/50 rounded-lg p-4 mt-6">
                    <h4 class="font-bold mb-2">ü§ñ Auto-Approval (Optional):</h4>
                    <p class="text-sm text-gray-400 mb-2">Set <code class="bg-slate-700 px-2 py-1 rounded">AUTO_APPROVE_LOW_RISK=true</code> in .env</p>
                    <div class="text-sm text-gray-400">‚Üí Low-risk actions (like rollbacks) auto-execute without waiting</div>
                </div>
            </div>

            <!-- Step 7: Execution -->
            <div class="bg-slate-800 rounded-xl p-8 border border-slate-700 fade-in">
                <div class="flex items-center gap-4 mb-6">
                    <div class="bg-green-600 rounded-full w-12 h-12 flex items-center justify-center text-xl font-bold">7</div>
                    <div>
                        <h2 class="text-2xl font-bold">Action Execution</h2>
                        <p class="text-gray-400">Worker executes the approved action</p>
                    </div>
                </div>

                <div class="space-y-4">
                    <div class="bg-slate-700/50 rounded-lg p-4">
                        <h4 class="font-bold mb-3">Execution Flow:</h4>
                        <div class="space-y-3">
                            <div class="flex items-center gap-3">
                                <div class="bg-blue-500 rounded-full w-8 h-8 flex items-center justify-center text-sm">1</div>
                                <div class="flex-1 bg-slate-800 rounded p-3">
                                    <div class="font-semibold">Worker polls approved queue</div>
                                    <div class="text-sm text-gray-400">Checks every 2 seconds for new actions</div>
                                </div>
                            </div>
                            <div class="flex items-center gap-3">
                                <div class="bg-blue-500 rounded-full w-8 h-8 flex items-center justify-center text-sm">2</div>
                                <div class="flex-1 bg-slate-800 rounded p-3">
                                    <div class="font-semibold">Validates action is safe</div>
                                    <div class="text-sm text-gray-400">Checks cooldowns, concurrent limits, safety rails</div>
                                </div>
                            </div>
                            <div class="flex items-center gap-3">
                                <div class="bg-blue-500 rounded-full w-8 h-8 flex items-center justify-center text-sm">3</div>
                                <div class="flex-1 bg-slate-800 rounded p-3">
                                    <div class="font-semibold">Executes action</div>
                                    <div class="text-sm text-gray-400">Calls appropriate API/CLI (kubectl, docker, API calls)</div>
                                </div>
                            </div>
                            <div class="flex items-center gap-3">
                                <div class="bg-blue-500 rounded-full w-8 h-8 flex items-center justify-center text-sm">4</div>
                                <div class="flex-1 bg-slate-800 rounded p-3">
                                    <div class="font-semibold">Records outcome</div>
                                    <div class="text-sm text-gray-400">Success/failure, duration, any errors</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="bg-green-900/20 border border-green-700/50 rounded-lg p-4">
                        <h4 class="font-bold mb-2">üõ°Ô∏è Safety Rails (Always Active):</h4>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-3 text-sm">
                            <div class="text-gray-400">‚úì Max 3 concurrent actions</div>
                            <div class="text-gray-400">‚úì 5-min cooldown between actions</div>
                            <div class="text-gray-400">‚úì Max 2 rollbacks per hour</div>
                            <div class="text-gray-400">‚úì Max 3x scale factor</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Step 8: Learning -->
            <div class="bg-slate-800 rounded-xl p-8 border border-slate-700 fade-in">
                <div class="flex items-center gap-4 mb-6">
                    <div class="bg-purple-600 rounded-full w-12 h-12 flex items-center justify-center text-xl font-bold">8</div>
                    <div>
                        <h2 class="text-2xl font-bold">System Learning (Phase 2)</h2>
                        <p class="text-gray-400">Records outcomes to improve future decisions</p>
                    </div>
                </div>

                <div class="space-y-4">
                    <div class="bg-slate-700/50 rounded-lg p-4">
                        <h4 class="font-bold mb-3">What Gets Recorded:</h4>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div class="bg-slate-800 rounded p-3">
                                <div class="font-semibold text-purple-400 mb-2">Incident Memory</div>
                                <div class="text-sm text-gray-400 space-y-1">
                                    <div>‚Ä¢ Anomaly patterns</div>
                                    <div>‚Ä¢ Root cause</div>
                                    <div>‚Ä¢ Symptoms</div>
                                    <div>‚Ä¢ Timing</div>
                                </div>
                            </div>
                            <div class="bg-slate-800 rounded p-3">
                                <div class="font-semibold text-purple-400 mb-2">Action Outcomes</div>
                                <div class="text-sm text-gray-400 space-y-1">
                                    <div>‚Ä¢ Action taken</div>
                                    <div>‚Ä¢ Success/failure</div>
                                    <div>‚Ä¢ Resolution time</div>
                                    <div>